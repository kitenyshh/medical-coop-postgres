<%- include('layout', {
  body: `
    <div class="exam-container">
      <h2>üë• –°–ø–∏—Å–æ–∫ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤</h2>
      <p><a href="/patients/new">+ –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞</a></p>
      <table>
        <thead>
          <tr>
            <th>–§–ò–û</th>
            <th>–ü–æ–ª</th>
            <th>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</th>
            <th>–ê–¥—Ä–µ—Å</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          ${
            patients.length === 0
              ? '<tr><td colspan="5">–ü–∞—Ü–∏–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</td></tr>'
              : patients.map(p => `
                  <tr>
                    <td>${p.full_name}</td>
                    <td>${p.gender || '-'}</td>
                    <td>${
                        p.birth_date
                            ? (() => {
                                const d = new Date(p.birth_date);
                                const dd = String(d.getDate()).padStart(2, '0');
                                const mm = String(d.getMonth() + 1).padStart(2, '0');
                                const yyyy = d.getFullYear();
                                return `${dd}.${mm}.${yyyy}`;
                            })()
                            : '-'
                    }</td>
                    <td>${p.home_address || '-'}</td>
                    <td><a href="/patients/${p.id}">–û—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</a></td>
                  </tr>
                `).join('')
          }
        </tbody>
      </table>
    </div>
  `,
  doctor
}) %>
